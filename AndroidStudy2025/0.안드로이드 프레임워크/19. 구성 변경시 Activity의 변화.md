# 구성 변경이 발생했을 때 Activity의 변화
- 구성 변경이 발생하면 시스템은 새 구성을 적용하기 위해 **Activity를 종료하고 다시 실행**
## 재생성을 유발하는 구성변경
- **화면 회전**: 새 크기에 맞게 레이아웃을 다시 로드
- **다크.라이트 테마 변경**: 테마별 리소스(색상 및 스타일 등)를 다시 로드
- **글꼴 크기 변경**: 새 글씨 배율을 반영하도록 텍스트 리소스 다시 로드
- **언어 변경**: 현지화된 리소스를 다시 로드
## 구성 변경시 기본 동작
1. Activity 종료 및 재시작
    - Activity 종료: onPause(), onStop(), **onDestroy()**
    - Activity 재시작: **onCreate()**
2. 리소스 다시 로드
    - 새 구성(레이아웃, 문자열 등)에 따라 변경사항을 반영
3. 데이터 손실 방지
    - 개발자는 데이터 손실 방지를 해야함
       - onSaveInstanceState() & onRestoreInstanceState() 사용
       - viewModel을 활용한 인스턴스 저장
```kotlin
    override fun onSaveInstanceState(outState: Bundle) {
        super.onSaveInstanceState(outState)
        outState.putString("key", "value")
    }
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        val value = savedInstanceState?.getString("key")
            ...
    }
```
## Activity 재생성 피하기
   - AndroidManifest에 Activity가 다시 시작하지 않아도 되는 구성 변경을 선언할 수 있음
   ```xml
   <activity
    android:name=".MyActivity"
    android:configChanges="orientation|screenSize|screenLayout|keyboardHidden"
    android:label="@string/app_name">
    ```
    ```kotlin
    class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MainScreen()
        }
    }

    override fun onConfigurationChanged(newConfig: Configuration) {
        super.onConfigurationChanged(newConfig) // 구성 변경이 발생했을 때 커스텀 가능
    }
}
    ```