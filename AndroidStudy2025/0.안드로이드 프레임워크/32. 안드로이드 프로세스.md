# 안드로이드 프로세스와 운영 체제
- 프로세스 : 앱이 실행되는 환경
   - 리눅스 커널 사용
   - 시스템 보안, 메모리 관리 및 내결함성(오류가 발생해도 시스템 전체 기능은 중단 없이) 보장
## 프로세스 작동 방식
1. 앱이 시작되면 운영 체제가 리눅스 fork() 시스템 함수를 호출하여 새 프로세스 생성
2. 프로세스는 Dalvik or ART 가상 머신의 고유 인스턴스에서 실행
3. 프로세스는 고유한 리눅스 사용자 ID를 갖고있음
   - 권한 제어 및 파일 시스템 격리 등 보안 경계에 사용
## 앱 컴포넌트와 프로세스
- 앱의 모든 컴포넌트는 동일한 프로세스 내에서 실행
- `AndroidManifest.xml` 파일에서 프로세스 커스텀 가능
```xml
<service
    android:name=".MyService"
    android:process=":remote"/> // 별도의 프로세스에서 동작하기 때문에 향상된 내결함성을 보장
```
- 안드로이드는 필요에 따라 우선순위가 낮은 프로세스를 종료
## 프로세스와 앱 생명주기
1. 포그라운드 프로세스
   - 사용자와 활발하게 상호작용중인 프로세스
   - 가장 높은 우선순위
2. 보이는 프로세스
   - 보이지만 상호작용중이지 않은 프로세스 (다이얼로그 뒤의 Activity)
3. 서비스 프로세스
   - 백그라운드 Service를 실행하는 프로세스
4. 캐시된 프로세스
   - 더 빠른 재실행을 위해 메모리에 유지되는 프로세스
   - 가장 낮은 우선순위

## 보안 및 권한
- 각 프로세스는 리눅스 보안 모델을 사용하여 샌드박스 처리
- 안드로이드 권한 시스템을 통해 명시적으로 허용하지 않으면 다른 프로세스의 데이터에 접근 불가

## 실전 질문
- 여러 프로세스를 사용할 때 잠재적 단점은?
   - 관리를 잘 못했을 때 메모리 누수 등이 발생할 수 있음
- 중요한 프로세스가 종료되지 않게 하기 위한 전략은?
   - 백그라운드 서비스의 경우 제공해주는 컴포넌트(foreground service 등) 사용 

## 안드로이드 컴포넌트와 프로세스
- 각 컴포넌트와 프로세스의 관련
1. Activity : 사용자가 앱을 열면 Activity를 시작
   - 사용자 상호 작용의 진입점
2. Service : 백그라운드 작업 수행
   - 앱과 동일한 프로세스 또는 별도의 프로세스에서 실행 가능
3. Broadcast Receiver : 앱이 네트워크 변경이나 배터리 상태 업데이트와 같은 시스템 전체 브로드캐스트 메시지를 받을 수 있음
   - 앱이 실행중이지 않아도 트리거가 된다면 시스템이 해당 프로세스를 시작
4. Content Provider : 공유 데이터를 관리
   - 프로세스간 통신 허용

각 컴포넌트들은 전용 프로세스를 가질 수 있기 때문에 4대 컴포넌트로 불림
