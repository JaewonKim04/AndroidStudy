# ContentProvider의 목적
- 애플리케이션 간 데이터 공유를 위한 컴포넌트
   - 다른 앱이나 컴포넌트가 데이터를 수정할 수 있는 중앙 저장소
   - 앱 간의 안전하고 일관된 데이터 공유
   - 내부 저장소 구조를 노출하지 않고 다른 앱에 데이터를 제공할 때 유용
- 데이터 소스를 추상화 하고 데이터와 상호 작용 할 수 있는 인터페이스 제공
## ContentProvider의 주요 구성 요소
- 데이터 접근 주소로 **URI** 사용
   - 권한 : ContentProvider 식별 (예: com.example.myapp.provider)
   - Path : 데이터 유형 (/user, /products)
   - ID(선택) : 데이터 셋 내 특정 항목

## ContentProvider 구현
```kotlin
class CustomContentProvider : ContentProvider() {
    override fun onCreate(): Boolean {
        // ContentProvider 초기화
    }

    override fun query(
        p0: Uri,
        p1: Array<out String>?,
        p2: String?,
        p3: Array<out String>?,
        p4: String?
    ): Cursor? {
        // URI 파싱, 테이블 조건 결정
    }

    override fun getType(p0: Uri): String? {
        // 어떤 MIME 타입인지 확인. 예를 들어, 텍스트 파일이라면 "text/plain", 이미지라면 "image/jpeg" 등
    }

    override fun insert(p0: Uri, p1: ContentValues?): Uri? {
        // 데이터 삽입
    }

    override fun delete(p0: Uri, p1: String?, p2: Array<out String>?): Int {
        // 데이터 삭제
    }

    override fun update(p0: Uri, p1: ContentValues?, p2: String?, p3: Array<out String>?): Int {
        // 데이터 수정
    }
}
```
## ContentProvider 등록
- AndroidManifest에 선언해야 다른앱에서 접근 가능
```xml
<provider
   android:name=".CustomContentProvider"
   android:authorities="com.example.myapp.provider"
   android:exproted="true"
   android:grantUriPermissions="true"/>
```
## ContentProvider 에서 데이터 접근하기
- ContentResolver 클래스 사용
```kotlin
// 데이터 쿼리
val cursor = contentResolver.query(
            Uri.parse("content://com.example.myapp.provider/users"),
            null, null, null, null
        )

// 데이터 삽입
val values = ContentValues().apply {
            put("name", "John Doe")
            put("age", 30)
        }
        contentResolver.insert(Uri.parse("content://com.example.myapp.provider/users"), values)
```

## 사용 사례
- 다른 앱 간 데이터 공유
- 연락처, 미디어 파일 등 구조화된 데이터 접근
- 파일 선택기와 같은 안드로이드 시스템 기능과 통합 활성화

## ContentProvider를 사용한 앱 초기 셋업
- ContentProvider의 onCreate() 메서드는 Application.onCreate() 보다 먼저 호출됨
- Jetpack App Startup 라이브러리 또한 ContentProvider를 활용하여 초기화 진행
- 이를통해 Application 생명주기가 시작되기 전 앱 컴포넌트를 모듈식으로 분리하여 깔끔하고 효율적으로 초기화 할 수 있음