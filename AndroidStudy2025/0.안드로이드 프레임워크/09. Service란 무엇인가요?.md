# Service란?
- 백그라운드에서 장기적으로 작업을 수행할 수 있는 컴포넌트
- 파일 다운로드, 음악 재생, 데이터 동기화 등의 백그라운드 작업에 사용
## Started Service
- startService()로 실행
- stopSelf()로 스스로 작업 중지 or stopService()로 서비스 중지
```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MainScreen()
        }
        lifecycle.addObserver(CustomObserver())
        val myService = Intent(this, MyService::class.java)
        startService(myService)
            ...
        stopService(myService)
    }
}
````
- 음악 재생
- 파일 업로드 또는 다운로드 등에 사용

## BoundService
```kotlin
class MainActivity : AppCompatActivity() {
    private val connection = object : ServiceConnection {

        override fun onServiceConnected(className: ComponentName, service: IBinder) {
            // We've bound to LocalService, cast the IBinder and get LocalService instance.
            val binder = service as LocalService.LocalBinder
            mService = binder.getService()
            mBound = true
        }

        override fun onServiceDisconnected(arg0: ComponentName) {
            mBound = false
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            MainScreen()
        }
        lifecycle.addObserver(CustomObserver())
        val myService = Intent(this, MyService::class.java)
        
        bindService(myService, ServiceConnection, BIND_AUTO_CREATE)
            ...
        unbindService(/* service connection */)
    }
}
```
- 컴포넌트가 bindService()를 사용하여 service에 바인딩 할 수 있음
- 모든 클라이언트의 연결이 끊어지면 중지

## Foreground Service
- 지속적인 알림을 표시하면서 활성 상태를 유지하는 Service
- 음악재생, 위치 추적과 같이 사용자가 계속 인지해야 하는 작업에 사용
```kotlin
class MyService: Service() {
    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {
        startForeground(1, notification) // 알림 표시와 함께 서비스 시작
        return super.onStartCommand(intent, flags, startId)
    }
}
```
- 우선순위가 높아 일반 Service에 비해 시스템에 의해 종료될 가능성 적음

# 서비스의 생명주기
## Started Service
- stopSelf(), stopService()를 통해 명시적으로 중지될 때 까지 실행
- onCreate() : 처음 생성될 때 호출, 리소스 초기화
- onStartCommand() : startService() 로 서비스가 시작될 때 호출
- onDestroy() : stopSelf()나 stopService()를 사용할 때 호출, 리소스 해제나 스레드 중지와 같은 정리 작업 수행
## Bound Service
- 하나 이상의 컴포넌트에 연결되어 바인딩 되는 동안 존재
- onCreate() : 처음 생성될 때 호출, 리소스 초기화
- onBind() : 컴포넌트가 서비스에 바인딩될 때 호출
- onUnbind() : 마지막 컴포넌트가 Service에서 언바인드될 대 호출. 클라이언트에 특정한 리소스를 정리
- onDestroy() : 서비스가 종료될 때. 리소스 정리 및 진행 중인 작업 중지