# 태스크와 백 스택
- 사용자 친화적인 워크플로우를 가능하게 하는 안드로이드 네비게이션 모델의 핵심
## 태스크
- Activity의 집합
- Activity가 실행될 때 시작
- 연관된 Activity가 소멸될 때 까지 활성 상태 유지
## 백 스택
- 태스크 내 Activity 기록 유지
- 사용자 워크플로우의 연속성 보장

## 런치 모드
- Activity가 백 스텍에서 어떻게 처리될 지 결정

```xml
<activity
    android:name=".main.MainActivity"
    android:exported="true"
    android:launchMode="standard"/>
```
### standard
- 기본 런치모드
- 매번 새 인스턴스를 생성하여 백 스택에 추가
### singleTop
- Activity의 인스턴스가 백 스택의 맨 위에 있는 경우 기존 인스턴스 사용
- onNewIntent()로 처리
### singleTask
- 태스크 내 인스턴스 하나만 존재
- 이미 존재하는 경우 다른 Activity 종료 후 맨 앞으로 가져옴
- onNewIntent() 호출
   - 앱의 진입점 역할에 유용
### singleInstance
- 호출시 다른 고유한 태스크로 배치됨
- 동일한 태스크에 다른 Activity가 포함될 수 없도록 보장
- [쉬운 이해를 도와줄 수 있는 그림 블로그](https://yebon-kim.tistory.com/6)

## 인텐트 플래그
- Intent를 전송할 때 Activity의 시작되는 방식이나 백스택의 동작을 수정하는 데 사용
```kotlin
val intent = Intent(this, NewActivity::class.java).apply { 
    flags = Intent.FLAG_ACTIVITY_NEW_TASK
}
```
### FLAG_ACTIVITY_NEW_TASK
- 새 태스크에서 Activity 시작
- 태스크가 이미 존재하는 경우 해당 태스크를 맨 앞으로 가져옴
### FLAG_ACTIVITY_CLEAR_TOP
- Activity가 이미 백 스택에 있는 경우, 위에 있는 모든 Activity 종료
- 기존 인스턴스가 Intent 처리
### FLAG_ACTIVITY_SINGLE_TOP
- Activity가 백 스택의 맨 위에 있는 경우에 새 인스턴스가 생성되지 않음
### FLAG_ACTIVITY_NO_HISTORY
- Activity가 백 스택에 추가되는 것을 방지

### 사용예제
```kotlin
val intent = Intent(this, NewActivity::class.java).apply { 
    flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TOP
}
```
- 두가지 Flag를 설정하는 것 가능