# Android
## 프로그래밍 규칙
### 네이밍
* 캐멀케이스(낙타처럼 높낮이가 생겨서 생긴이름)
1. 클래스명: 첫글자는 __대문자__ &새로운단어의 첫글자도 __대문자__
2. 함수명,변수명:첫글자는 __소문자__ &새로운 단어의 첫글자는 __대문자__  
3. 상수명: __모두대문자__
* 스네이크 케이스: 상수만 대문자를 사용하고 다른떄는 __소문자__ 를 사용   
대신 중간중간에 _ 를 붙임 (예:fun no_create(){})
- __이름을 구체적으로 해서 주석달일을 없게 하자__
### 들여쓰기(Indent)
1. 함수,변수등- 일반적으로 공백 __4칸__ 을 들여씀
2. 항수안의 코드들- 이전들여쓰기+4칸(총 __8칸__ 들여씀)
***
## context
* 시스템을 사용하기 위한 __정보(프로퍼티)__ 와 __도구(메서드)__ 가 담겨있는 클래스
* 컴포넌트 실행과 함께 생성됨
* 엑티비티는 컨텍스트를 상속받아서 구현됨(basecontext를 호출하면 안드로이드의 기본기릉을 사용할수 있음)
#### context종류
1. 애플리케이션 컨텍스트:   
* 핵심기능을 담고있는 클래스
* 앱을 통틀어서 하나의 인스턴스만 생성됨
* 호출하는 지점과 관계없이 모두 동일한 컨텍스트가 호출됨
2. 베이스 컨텍스트:
* 4대메이저 컴포넌트(액티비티,서비스,컨텐트 프로바이더,브로드캐스트 리시버)의 기반 클래스
* 컴포넌트의 개수만큼 있기때문에 호출할때마드 다른 컨텍스트가 호출됨
***
## 엑티비티 생명주기
* 상태 변화가 있을 때마다 화면에 보여지는 액티비티의 메서드
* override를 통해 사용됨
1. onCreate():만들어졌을때-실제 코드를 가장 많이 작성하는 메서드
2. onstart():화면에 나타남-화면에 보이기 시작함
3. onResume():화면에 나타남(현재 실행중)-실행중이라는 의미
4. onPause():화면이 가려짐-다른엑티비티에 일부가 가려짐
5. onStop():화면이 없어짐- 다른 액티비티가 실행되서 화면이 완전히 가려짐
6. onDestroy():종료됨-앱이 종료됨
***
### 생명 주기 콜백
1. onCreate()메서드로 생성된 다음 화면 구성요소를 메모리에 로드함, onStart()와 onResume(으로 액티비티가 화면에서 실행되고 있을을 알림
2. 뒤로가기나 finish()로 액티비티를 종료하면 onPause(),onStop()이 동시에 실행되고 최종적으로 onDestroy()가 호출되면서 액티비티가 메모리에서 제거됨
* 현재 액티비티는 종료하지 않고 새로운 액티비티가 생성될때
1.  현재 액티비티는 onPause()와 onStop()까지만 호출되고 종료되지는 않음
2. 새로 생성된 액티비티는 onStart()와 onResume()을 연속적으로 호출한후 실행상태가 됨
* 현재 액티비티를 모두 가리지 않고 생성될때
1. 현재 액티비티가 1dp라도 화면에 표시되면 onPause()까지 진행되서 일시정지로 대기한다
2. 새로생성됐던 액티비티가 종료되면 onStart()를 거치지 않고 onResume()이 호출됨
***
## 액티비티 백스택
* 액티비티 또는 화면 컴포넌트를 담는 __안드로이드의 저장공간__
* 액티비티를 여러개 실행하면 액티비티가 백스택에 쌓이게 됨
* 사용자는 가장 위에있는 액티비티를 보게됨
* 현재 액티비티를 종료하면 현재액티비티가 스택에서 제거되므로 바로 다음에 쌓여있던 액티비티가 백스택의 가장 위로 오면서 화면에 나타남
***
## 태스크와 프로세스
* 태스크는 애플리케이션에서 실행되는 프로세스를 관리하는 작업단위
***
## 권한
* 권한명세와 기능명세 둘다 __AndroidManifest.xml__ 에서 설정해야한다
### 권한명세
* 데이터나 기능의 사용여부를 설정
* "uses-permission"태그로 설정한다
### 기능명세
* 헤당 기능이있는 안드로이드 폰에서만 받을수있게 하는것
* "uses-feature"으로 설정한다
* 기능명세를 설정하면 기능사용여부로 플레이 스토어 검색조건이 결정됨

### 권한의 보호수준

#### 일반권한
* 설치시 사용자에게 권한 승인을 묻는 팝업창을 보여줌
* 종류
1. 인터넷사용
2. 인터넷 상태확인
3. 알람설정
4. 블루투스 상태확인
5. 기기 간 근거리 통신 사용
6. 진동설장   
쌍따옴표("")안에 android.permission.권한이름 으로 적으면 됨

#### 위험권한
* 사용자의 개인정보와 관련된 데이터나 기능을 액세스함
* 다른 앱 및 기기의 작동에 영향을 줄 우려가 있는 권한
* build.gradle파일의 targetSdkVersion 이 23 이상이어야 정상으로 작동함
* 종류
1. 캘린더 읽기,쓰기
2. 카메라 
3. 주소록 읽기,쓰기
4. 계정정보 가져오기
5. 위치정보 사용
6. 마이크 녹음
7. 폰 상태 정보
8. 전화번호 가져오기
9. 발신하기
10. 응답하기
11. 전화 로그 쓰기
12. 음성메일 추가
13. sip사용
14. 통화관련 brodcase수신
15. 바디센서
16. sms보내기,받기,읽기
17. wap수신
18. mms받기
19. 안드로이드 공용 저장소 읽기,쓰기
* 처리하기
* 소스코드에서 처리한다   
1. 권한에 대한 사용자 승인 확인   
__-권한의 승인상태가져오기:__  
```kotlin
val cameraPermission=Context.Compat.checkSelfPermission(this,Manifest.permission.CAMERA)   
```
__-권한여부 확인하기:__   
```kotlin
if(cameraPermssion==PackageManager.PERMSSION_GRANTED){//상태가 승인일때 코드}   
```
__아니라면 2단계 실행__   
2. 사용자에게 승인 요청   
-requestPermissions()를 호출해서 요청   
```kotlin
fun requestPermission(){
    ActivityCompat.requestPermissions(this,arrayOf(Manifest.permission.CAMERA),99)
    //2번째 매개변수:권한이 복수있때를 대비한 배열
    //3번째 매개변수:요청한 주체가 어떤 것인지 구분하기 위한것
}
```    
-앱을 실행시키면 권한 승인을 묻는 팝업이 나타남   
3. 사용자 승인 후 처리
- 사용자가 거절 혹은 수락을 클릭하면 onRequestPermissionResult()메서드가 호출됨
```kotlin
override fun onRequestPermissionsResult(
        requestCode: Int, //요청한 주체를 확인하는 코드
        permissions: Array<out String>, //요청한 권한 목록
        grantResults: IntArray  //권한 목록에 대한 승인 미승인값,권한 목록의 개수
    ) {
        when(requestCode){
            99->{
                if(grantResults[0]==PackageManager.PERMISSION_GRANTED){
                    startProcess()
                }else{
                    finish()
                }
            }
        }
    }
```
#### 서명권한
* 권한을 사용하려는 앱이 권한을 정의하는 앱과 동일한 인증서로 서명된 경우 시스템은 권한을 자동으로 부여함
